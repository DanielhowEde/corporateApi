{% extends "user/base.html" %}

{% block content %}
{% if is_required %}
<div class="alert alert-info">
    <strong>Password Change Required:</strong> You must change your password before continuing.
</div>
{% endif %}

{% if error %}
<div class="alert alert-error">{{ error }}</div>
{% endif %}

{% if message %}
<div class="alert alert-success">{{ message }}</div>
{% endif %}

<div class="card">
    <h2>Change Password</h2>
    <p class="text-muted mb-4">
        Logged in as: <strong>{{ username }}</strong>
    </p>

    <form action="/user/change-password" method="post" style="max-width: 400px;">
        <div class="form-group">
            <label for="current_password">Current Password</label>
            <input type="password"
                   id="current_password"
                   name="current_password"
                   class="form-control"
                   placeholder="Enter current password"
                   required
                   autofocus>
        </div>

        <div class="form-group">
            <label for="new_password">New Password</label>
            <input type="password"
                   id="new_password"
                   name="new_password"
                   class="form-control"
                   placeholder="Enter new password (min 6 chars)"
                   minlength="6"
                   required>
        </div>

        <div class="form-group">
            <label for="confirm_password">Confirm New Password</label>
            <input type="password"
                   id="confirm_password"
                   name="confirm_password"
                   class="form-control"
                   placeholder="Confirm new password"
                   minlength="6"
                   required>
        </div>

        <button type="submit" class="btn btn-primary">
            Change Password
        </button>

        {% if not is_required %}
        <a href="/user/" class="btn btn-secondary" style="margin-left: 1rem;">
            Cancel
        </a>
        {% endif %}
    </form>
</div>

<div class="card">
    <h2>Password Requirements</h2>
    <ul style="margin: 0.5rem 0 0 1.5rem; color: #6b7280;">
        <li>Minimum 6 characters</li>
        <li>Must be different from current password</li>
        <li>Choose a strong password that others cannot guess</li>
    </ul>
</div>
{% endblock %}
